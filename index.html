<!doctype html>
<html lang="uk">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>–ö–æ–ª–µ—Å–æ –ø–æ–±–∞–∂–∞–Ω—å</title>
    <style>
        :root { --size: 320px; }

        body{
            font-family: system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
            margin:0; min-height:100vh; display:grid; place-items:center;
            background:#0f172a; color:#e2e8f0;
            overflow:hidden;
        }
        .wrap{ width:min(92vw,520px); text-align:center; }
        h1{ font-size:20px; margin:0 0 12px; font-weight:650; }

        .wheel-area{
            position:relative;
            display:grid;
            place-items:center;
            margin:16px auto;
            width: var(--size);
            height: var(--size);
            transform: perspective(900px);
        }

        .pointer{
            position:absolute; top:-12px; left:50%;
            transform:translateX(-50%);
            width:0; height:0;
            border-left: 12px solid transparent;
            border-right:12px solid transparent;
            border-bottom:18px solid #fbbf24;
            filter: drop-shadow(0 2px 2px rgba(0,0,0,.35));
            z-index: 60;
            transform-origin: 50% 100%;
        }

        /* –∫–æ—Ä–æ—Ç–∫–∏–π ‚Äúshake‚Äù —Å—Ç—Ä—ñ–ª–∫–∏ */
        .pointer.tick{
            animation: pointerTick 110ms ease-out both;
        }
        @keyframes pointerTick{
            0%   { transform: translateX(-50%) rotate(0deg); }
            35%  { transform: translateX(-50%) rotate(-7deg); }
            70%  { transform: translateX(-50%) rotate(5deg); }
            100% { transform: translateX(-50%) rotate(0deg); }
        }

        /* –æ—Å–Ω–æ–≤–∞/‚Äú—Ç–æ–≤—â–∏–Ω–∞‚Äù */
        .wheel-base{
            position:absolute; inset:0;
            border-radius:50%;
            background:
                    radial-gradient(circle at 35% 28%, rgba(255,255,255,.10), transparent 48%),
                    radial-gradient(circle at 50% 78%, rgba(0,0,0,.55), transparent 60%),
                    linear-gradient(to bottom, rgba(255,255,255,.06), rgba(0,0,0,.22));
            transform: translateY(12px) rotateX(10deg);
            z-index: 1;
            box-shadow: 0 28px 70px rgba(0,0,0,.55);
        }

        /* —Ä–æ—Ç–æ—Ä (–∫—Ä—É—Ç–∏—Ç—å—Å—è –≤—Å–µ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ) */
        .wheel-rotor{
            position:absolute; inset:0;
            border-radius:50%;
            z-index: 10;
            transform: rotate(0deg) translateZ(0);
            transition: transform 4.6s cubic-bezier(.14,.86,.18,1.08);
            will-change: transform;
        }

        /* –∫–æ–ª—å–æ—Ä–æ–≤–µ –∫–æ–ª–µ—Å–æ */
        .wheel-face{
            position:absolute; inset:0;
            border-radius:50%;
            background: conic-gradient(
                    from -90deg,
                    #a78bfa 0deg 45deg,
                    #22d3ee 45deg 90deg,
                    #f472b6 90deg 135deg,
                    #4ade80 135deg 180deg,
                    #60a5fa 180deg 225deg,
                    #34d399 225deg 270deg,
                    #fbbf24 270deg 315deg,
                    #fb7185 315deg 360deg
            );
            box-shadow:
                    0 0 0 10px rgba(255,255,255,.09),
                    0 20px 60px rgba(0,0,0,.45),
                    inset 0 0 22px rgba(15,23,42,.95);
            overflow:hidden;
            z-index: 10;
        }

        /* –ó–∞–≥–ª–∏–±–ª–µ–Ω–Ω—è –º—ñ–∂ —Å–µ–∫—Ç–æ—Ä–∞–º–∏ (–∫–∞–Ω–∞–≤–∫–∏ –ø–æ –º–µ–∂–∞—Ö) */
        .wheel-grooves{
            position:absolute; inset:0;
            border-radius:50%;
            pointer-events:none;
            z-index: 20;
            background:
                    repeating-conic-gradient(
                            from -90deg,
                            rgba(0,0,0,.48) 0deg 0.9deg,
                            rgba(255,255,255,.10) 0.9deg 1.7deg,
                            transparent 1.7deg 45deg
                    );
            opacity: .95;
            filter: blur(.25px);
            box-shadow: inset 0 0 18px rgba(0,0,0,.35);
            mix-blend-mode: multiply;
        }

        /* ‚Äú–í–∏—Ä—ñ–∑–∏‚Äù (–ª—É–Ω–∫–∏) –≤ –∫–æ–∂–Ω–æ–º—É —Å–µ–∫—Ç–æ—Ä—ñ */
        .cutouts{
            position:absolute; inset:0;
            border-radius:50%;
            pointer-events:none;
            z-index: 30;
        }
        .cutout{
            position:absolute;
            left:50%;
            top:50%;
            width:22px;
            height:22px;
            border-radius: 50%;

            /* –ö–õ–Æ–ß–û–í–ï: —Ü–µ–Ω—Ç—Ä –µ–ª–µ–º–µ–Ω—Ç–∞ = —Ü–µ–Ω—Ç—Ä —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ–π */
            transform-origin: 50% 50%;

            background: rgba(0,0,0,.28);
            mix-blend-mode: multiply;

            box-shadow:
                    inset 0 2px 5px rgba(0,0,0,.55),
                    inset 0 -1px 3px rgba(255,255,255,.08);

            border: 1px solid rgba(255,255,255,.08);
        }

        /* –ó–∞–≥–∞–ª—å–Ω–∏–π –≥–ª—è–Ω–µ—Ü—å/–æ–± º—î–º –Ω–∞ –í–°–¨–û–ú–£ –∫–æ–ª–µ—Å—ñ */
        .wheel-volume{
            position:absolute; inset:0;
            border-radius:50%;
            pointer-events:none;
            z-index: 40;
            background:
                    radial-gradient(circle at 28% 22%, rgba(255,255,255,.26), transparent 45%),
                    radial-gradient(circle at 50% 58%, rgba(0,0,0,.60) 62%, transparent 88%),
                    radial-gradient(circle at 50% 50%, rgba(255,255,255,.06) 0, transparent 55%);
            box-shadow: inset 0 0 28px rgba(0,0,0,.65);
            mix-blend-mode: screen;
            opacity: .95;
        }

        .hub{
            position:absolute; left:50%; top:50%;
            transform:translate(-50%,-50%);
            width: 88px; height: 88px;
            border-radius:50%;
            background: rgba(15,23,42,.86);
            border: 2px solid rgba(255,255,255,.14);
            display:grid; place-items:center;
            z-index: 55;
            backdrop-filter: blur(6px);
            box-shadow:
                    inset 0 10px 18px rgba(255,255,255,.06),
                    inset 0 -12px 18px rgba(0,0,0,.35);
        }

        button{
            appearance:none; border:0; cursor:pointer;
            padding:12px 16px; border-radius:14px;
            background:#38bdf8; color:#082f49; font-weight:800;
            box-shadow: 0 10px 30px rgba(56,189,248,.25);
            transition: transform .12s ease;
        }
        button:active{ transform: translateY(1px) scale(.99); }
        button:disabled{ opacity:.55; cursor:not-allowed; }

        .result{
            margin-top:14px;
            padding:14px 16px;
            border-radius:16px;
            background: rgba(255,255,255,.06);
            border: 1px solid rgba(255,255,255,.10);
            min-height: 52px;
            display:grid; place-items:center;
            position: relative;
        }

        .result.pop{ animation: popIn .55s cubic-bezier(.2,.9,.2,1.2) both; }
        @keyframes popIn{
            0%   { transform: translateY(8px) scale(.94); opacity: .2; }
            60%  { transform: translateY(-2px) scale(1.03); opacity: 1; }
            100% { transform: translateY(0) scale(1); }
        }

        #confetti{
            position: fixed;
            inset: 0;
            pointer-events:none;
            z-index: 999;
        }
    </style>
</head>
<body>
<canvas id="confetti"></canvas>

<div class="wrap">
    <h1>–ö–æ–ª–µ—Å–æ –ø–æ–±–∞–∂–∞–Ω—å üé°</h1>

    <div class="wheel-area">
        <div id="pointer" class="pointer"></div>
        <div class="wheel-base"></div>

        <div id="rotor" class="wheel-rotor">
            <div class="wheel-face"></div>
            <div class="wheel-grooves"></div>
            <div id="cutouts" class="cutouts"></div>
            <div class="wheel-volume"></div>
        </div>

        <div class="hub">
            <button id="spinBtn">–ö—Ä—É—Ç–∏—Ç–∏</button>
        </div>
    </div>

    <div id="result" class="result">–ù–∞—Ç–∏—Å–Ω–∏ ‚Äú–ö—Ä—É—Ç–∏—Ç–∏‚Äù, —â–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ –ø–æ–±–∞–∂–∞–Ω–Ω—è ‚ú®</div>
</div>

<script>
    const WISHES = [
        "–£ –Ω–æ–≤–æ–º—É —Ä–æ—Ü—ñ –≤–∞—à—ñ —É—Ä–æ–∫–∏ –ø—Ä–æ—Ö–æ–¥–∏—Ç–∏–º—É—Ç—å —Ç–∞–∫ –∑–∞—Ö–æ–ø–ª–∏–≤–æ, —â–æ –¥–∑–≤—ñ–Ω–æ–∫ –∑–∞–≤–∞–∂–∞—Ç–∏–º–µ",
        "–ñ—É—Ä–Ω–∞–ª —á–∞—Å—Ç—ñ—à–µ —Ä–∞–¥—É–≤–∞—Ç–∏–º–µ, –Ω—ñ–∂ –¥–∏–≤—É–≤–∞—Ç–∏–º–µ",
        "–£—á–Ω—ñ –Ω–µ—Å–ø–æ–¥—ñ–≤–∞–Ω–æ –ø–æ—á–Ω—É—Ç—å –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ –¥–æ–º–∞—à–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è –≤—á–∞—Å–Ω–æ",
        "–ú–µ—Ç–æ–¥–∏—á–Ω—ñ —ñ–¥–µ—ó –ø—Ä–∏—Ö–æ–¥–∏—Ç–∏–º—É—Ç—å —Ä–∞–Ω—ñ—à–µ, –Ω—ñ–∂ –∫–∞–≤–∞ –æ—Ö–æ–ª–æ–Ω–µ",
        "–ù–∞ –ø–µ–¥—Ä–∞–¥–∞—Ö –±—É–¥–µ –±—ñ–ª—å—à–µ –ø–æ—Å–º—ñ—à–æ–∫, –Ω—ñ–∂ –∑–∞—É–≤–∞–∂–µ–Ω—å",
        "–£—Ä–æ–∫–∏ —Å—Ç–∞–Ω—É—Ç—å –ø—Ä–∏–∫–ª–∞–¥–æ–º –¥–ª—è –Ω–∞—Å–ª—ñ–¥—É–≤–∞–Ω–Ω—è –Ω–∞–≤—ñ—Ç—å –¥–ª—è –∫–æ–ª–µ–≥",
        "–í–∞—à–∞ –ø—Ä–æ—Ñ–µ—Å—ñ–π–Ω–∞ –≤–ø–µ–≤–Ω–µ–Ω—ñ—Å—Ç—å –∑—Ä–æ—Å—Ç–∞—Ç–∏–º–µ –∑ –∫–æ–∂–Ω–∏–º –º—ñ—Å—è—Ü–µ–º",
        "–ö–ª–∞—Å–Ω–∏–π –∫–µ—Ä—ñ–≤–Ω–∏–∫ —É –≤–∞—Å ‚Äî –∑–æ–ª–æ—Ç–æ (–Ω–∞–≤—ñ—Ç—å —è–∫—â–æ —Ü–µ –≤–∏ —Å–∞–º—ñ)",
        "–í–∏ –≤—Å—Ç–∏–≥–∞—Ç–∏–º–µ—Ç–µ –∑–∞–ø–æ–≤–Ω–∏—Ç–∏ ¬´–ú—Ä—ñ—é¬ª, –¥–æ–∫–∏ –Ω–µ –≤–∏–º–∫–Ω—É—Ç—å —Å–≤—ñ—Ç–ª–æ",
        "–£—Å—ñ –ø–ª–∞–Ω–∏ —Ç–∞ –∑–≤—ñ—Ç–∏ —Å–∫–ª–∞–¥–∞—Ç–∏–º—É—Ç—å—Å—è –ª–µ–≥–∫–æ —ñ –±–µ–∑ –Ω—ñ—á–Ω–∏—Ö –ø—Ä–∏–≥–æ–¥",
        "–£ –Ω–æ–≤–æ–º—É —Ä–æ—Ü—ñ –≤–∏ –≤—ñ–¥–∫—Ä–∏—î—Ç–µ –≤ —Å–æ–±—ñ —â–µ –æ–¥–∏–Ω –ø–µ–¥–∞–≥–æ–≥—ñ—á–Ω–∏–π —Ç–∞–ª–∞–Ω—Ç",
        "–ù–∞–≤—ñ—Ç—å —Å–∫–ª–∞–¥–Ω—ñ —Ç–µ–º–∏ —Å—Ç–∞–Ω—É—Ç—å –∑—Ä–æ–∑—É–º—ñ–ª–∏–º–∏ –≤–∞—à–∏–º –¥—ñ—Ç—è–º —ñ–∑ –ø–µ—Ä—à–æ–≥–æ —Ä–∞–∑—É",
        "–ë–∞—Ç—å–∫—ñ–≤—Å—å–∫—ñ –∑–±–æ—Ä–∏ –ø—Ä–æ—Ö–æ–¥–∏—Ç–∏–º—É—Ç—å —É –¥—Ä—É–∂–Ω—ñ–π –∞—Ç–º–æ—Å—Ñ–µ—Ä—ñ, –∞–ª–µ –Ω–µ —Ç–æ—á–Ω–æ",
        "–í–∞—à –∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç —Å–µ—Ä–µ–¥ —É—á–Ω—ñ–≤ –∑—Ä–æ—Å—Ç–µ —Ä–∞–Ω—ñ—à–µ, –∞–Ω—ñ–∂ –û–±–ª–µ–Ω–µ—Ä–≥–æ –Ω–∞–¥—ñ—à–ª–µ –≥—Ä–∞—Ñ—ñ–∫–∏ –≤—ñ–¥–∫–ª—é—á–µ–Ω—å",
        "–£ –∫–∞–±—ñ–Ω–µ—Ç –∑–∞—Å—Ç—É–ø–Ω–∏–∫—ñ–≤ –≤–∏ –∑–∞—Ö–æ–¥–∏—Ç–∏–º–µ —Ç—ñ–ª—å–∫–∏ –∑–∞ –±—É–ª–æ—á–∫–∞–º–∏, –∞–ª–µ –Ω–µ –ø–æ—Å—Ç—ñ–π–Ω–æ",
        "–£—á–Ω—ñ –Ω–µ –∑–∞–ø—ñ–∑–Ω—é–≤–∞—Ç–∏–º—É—Ç—å—Å—è –Ω–∞ –≤–∞—à—ñ —É—Ä–æ–∫–∏, –∞–ª–µ —Ç—ñ–ª—å–∫–∏ —è–∫—â–æ —É—Ä–æ–∫ –Ω–∞ –¥—Ä—É–≥—É –∑–º—ñ–Ω—É",
        "–ö–æ–ª–µ–≥–∏ —á–∞—Å—Ç—ñ—à–µ –∑–≤–µ—Ä—Ç–∞—Ç–∏–º—É—Ç—å—Å—è –∑–∞ –ø–æ—Ä–∞–¥–æ—é, –∞ —â–µ —á–∞—Å—Ç—ñ—à–µ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é",
        "–£—Å–ø—ñ—Ö–∏ —É—á–Ω—ñ–≤ —Å—Ç–∞–Ω—É—Ç—å –Ω–∞–π–∫—Ä–∞—â–æ—é –Ω–∞–≥–æ—Ä–æ–¥–æ—é, –∞ –ø–æ—Ç—ñ–º —É–∂–µ —ñ –∑–∞—Ä–ø–ª–∞—Ç–∞",
        "–ó–∞—Ä–æ–±—ñ—Ç–Ω–∞ –ø–ª–∞—Ç–∞ –∑—Ä–æ—Å—Ç–µ, –∞–ª–µ –Ω–µ–≤—ñ–¥–æ–º–æ –Ω–∞ —Å–∫—ñ–ª—å–∫–∏",
        "–í–∞—à–∞ –ø—Ä–∞—Ü—è –±—É–¥–µ –ø–æ–º—ñ—á–µ–Ω–∞ —ñ –≥—ñ–¥–Ω–æ –æ—Ü—ñ–Ω–µ–Ω–∞, –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ü—ñ—î—é —Ç–∞–∫ —Ç–æ—á–Ω–æ",
        "–ù–∞–≤—ñ—Ç—å –ø–æ–Ω–µ–¥—ñ–ª–∫–∏ —Å—Ç–∞–Ω—É—Ç—å –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–∏–º–∏, –∞–ª–µ —Ü–µ —Ç—ñ–ª—å–∫–∏ –≤–ª—ñ—Ç–∫—É",
        "–£ –≤–∞—Å –∑–∞–≤–∂–¥–∏ –±—É–¥—É—Ç—å —ñ–¥–µ—ó, —á–∏–º –∑–∞–π–Ω—è—Ç–∏ –¥—ñ—Ç–µ–π —ñ —É–∫—Ä–∏—Ç—Ç—ñ",
        "–í–∞—à–∏—Ö –¥—ñ—Ç–µ–π –∑ —É–∫—Ä–∏—Ç—Ç—è –∑–∞–≤–∂–¥–∏ –∑–∞–±–∏—Ä–∞—Ç–∏–º—É—Ç—å –≤—á–∞—Å–Ω–æ",
        "–ú–æ–∂–ª–∏–≤–æ, —É —Ö–æ–ª—ñ –≥—ñ–º–Ω–∞–∑—ñ—ó –ø–æ—Å—Ç–∞–≤–ª—è—Ç—å –∫–∞–≤–æ–≤–∏–π –∞–≤—Ç–æ–º–∞—Ç, —ñ —É –≤–∞—Å –±—É–¥–µ –∑–Ω–∏–∂–∫–∞ –Ω–∞ –µ—Å–ø—Ä–µ—Å–æ"
    ];

    const rotorEl   = document.getElementById("rotor");
    const cutoutsEl = document.getElementById("cutouts");
    const resultEl  = document.getElementById("result");
    const spinBtn   = document.getElementById("spinBtn");
    const pointerEl = document.getElementById("pointer");

    const SECTORS = 8;
    const STEP = 360 / SECTORS;

    // ----- –ª—É–Ω–∫–∏ (‚Äú–≤–∏—Ä—ñ–∑–∏‚Äù) –ø–æ —Å–µ–∫—Ç–æ—Ä–∞–º (–∫—Ä—É—Ç—è—Ç—å—Å—è —Ä–∞–∑–æ–º –∑ –∫–æ–ª–µ—Å–æ–º) -----
    function buildCutouts(){
        cutoutsEl.innerHTML = "";
        const radius = 0.36; // –≤—ñ–¥–Ω–æ—Å–Ω–æ —Ä–∞–¥—ñ—É—Å–∞ –∫–æ–ª–µ—Å–∞

        for (let i = 0; i < SECTORS; i++){
            const angle = -90 + (i * STEP) + STEP / 2;

            const d = document.createElement("div");
            d.className = "cutout";

            d.style.transform = `
        translate(-50%, -50%)
        rotate(${angle}deg)
        translateY(calc(var(--size) * -${radius}))
      `;

            cutoutsEl.appendChild(d);
        }
    }
    buildCutouts();

    // ----- –¥–æ–ø–æ–º—ñ–∂–Ω—ñ -----
    let currentRotation = 0;
    let isSpinning = false;
    let isLockedForever = false;

    function randInt(min, max){ return Math.floor(Math.random() * (max - min + 1)) + min; }

    function animateResult(text){
        resultEl.classList.remove("pop");
        void resultEl.offsetWidth;
        resultEl.textContent = text;
        resultEl.classList.add("pop");
    }

    function getSectorIndexFromRotation(rotationDeg){
        const rot = ((rotationDeg % 360) + 360) % 360;
        const angleUnderPointer = (360 - rot) % 360;
        return Math.floor(angleUnderPointer / STEP);
    }

    function pointerTick(){
        pointerEl.classList.remove("tick");
        void pointerEl.offsetWidth;
        pointerEl.classList.add("tick");
    }

    // ----- —Ç—Ä–µ–∫—ñ–Ω–≥ –ø–æ—Ç–æ—á–Ω–æ–≥–æ –∫—É—Ç–∞ —Ä–æ—Ç–æ—Ä–∞ –ø—ñ–¥ —á–∞—Å transition -----
    function readRotationDeg(el){
        const tr = getComputedStyle(el).transform;
        if (!tr || tr === "none") return 0;
        const m = tr.match(/matrix\(([^)]+)\)/);
        if (!m) return 0;
        const [a,b] = m[1].split(",").map(Number);
        let deg = Math.atan2(b, a) * (180 / Math.PI);
        deg = (deg + 360) % 360;
        return deg;
    }

    // ----- –∫–æ–Ω—Ñ–µ—Ç—Ç—ñ (–≤ —Ä—ñ–∑–Ω—ñ —Å—Ç–æ—Ä–æ–Ω–∏) -----
    const canvas = document.getElementById("confetti");
    const ctx = canvas.getContext("2d");

    function resizeCanvas(){
        canvas.width  = window.innerWidth * devicePixelRatio;
        canvas.height = window.innerHeight * devicePixelRatio;
        ctx.setTransform(devicePixelRatio, 0, 0, devicePixelRatio, 0, 0);
    }
    window.addEventListener("resize", resizeCanvas);
    resizeCanvas();

    function confettiBurst(durationMs = 1400){
        const particles = [];
        const count = 180;
        const originX = window.innerWidth / 2;
        const originY = Math.min(160, window.innerHeight * 0.22);

        for (let i = 0; i < count; i++){
            const speed = 3.5 + Math.random() * 9.5;
            const angle = Math.random() * Math.PI * 2; // 0..360

            particles.push({
                x: originX, y: originY,
                vx: Math.cos(angle) * speed,
                vy: Math.sin(angle) * speed,
                g: 0.18 + Math.random() * 0.22,
                w: 4 + Math.random() * 5,
                h: 6 + Math.random() * 7,
                r: Math.random() * Math.PI,
                vr: (-0.25 + Math.random() * 0.5),
                ttl: durationMs * (0.85 + Math.random() * 0.35),
                alpha: 1
            });
        }

        const start = performance.now();

        function frame(t){
            const elapsed = t - start;
            ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);

            for (const p of particles){
                p.vy += p.g;
                p.x += p.vx;
                p.y += p.vy;
                p.r += p.vr;

                const left = p.ttl - elapsed;
                p.alpha = Math.max(0, Math.min(1, left / 500));

                ctx.save();
                ctx.globalAlpha = p.alpha;
                ctx.translate(p.x, p.y);
                ctx.rotate(p.r);

                const hue = (p.x*0.6 + p.y*0.4 + elapsed*0.08) % 360;
                ctx.fillStyle = `hsl(${hue} 90% 60%)`;
                ctx.fillRect(-p.w/2, -p.h/2, p.w, p.h);
                ctx.restore();
            }

            if (elapsed < durationMs) requestAnimationFrame(frame);
            else ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);
        }
        requestAnimationFrame(frame);
    }

    // ----- spin + shake –Ω–∞ –º–µ–∂–∞—Ö —Å–µ–∫—Ç–æ—Ä—ñ–≤ -----
    function spin(){
        if (isSpinning || isLockedForever) return;

        isSpinning = true;
        spinBtn.disabled = true;
        animateResult("–ö—Ä—É—Ç–∏–º–æ...");

        const extraSpins = randInt(4, 7) * 360;
        const randomAngle = randInt(0, 359);
        const startRotation = currentRotation;

        currentRotation += extraSpins + randomAngle;
        rotorEl.style.transform = `rotate(${currentRotation}deg)`;

        // rAF: –ª–æ–≤–∏–º–æ –∑–º—ñ–Ω—É —Å–µ–∫—Ç–æ—Ä–∞ –ø—ñ–¥ —Å—Ç—Ä—ñ–ª–∫–æ—é —ñ —Ä–æ–±–∏–º–æ tick
        let lastIdx = getSectorIndexFromRotation(startRotation);
        let rafId = 0;

        const watch = () => {
            const rotNow = readRotationDeg(rotorEl); // 0..359
            const idx = getSectorIndexFromRotation(rotNow);
            if (idx !== lastIdx){
                lastIdx = idx;
                pointerTick();
            }
            if (isSpinning) rafId = requestAnimationFrame(watch);
        };
        rafId = requestAnimationFrame(watch);

        window.setTimeout(() => {
            cancelAnimationFrame(rafId);

            const idx = getSectorIndexFromRotation(currentRotation);
            const wish = WISHES[idx];

            confettiBurst();
            animateResult(`üéâ ‚ú® ${wish}`);

            // –±–ª–æ–∫—É—î–º–æ –ø–æ–≤—Ç–æ—Ä–Ω–∏–π —Å–ø—ñ–Ω
            isLockedForever = true;
            spinBtn.disabled = true;
            spinBtn.textContent = "–ì–æ—Ç–æ–≤–æ";
            isSpinning = false;
        }, 4700);
    }

    spinBtn.addEventListener("click", spin);
</script>
</body>
</html>
